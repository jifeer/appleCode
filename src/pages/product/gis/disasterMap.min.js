!function (o, e) {
  "object" == typeof exports && "object" == typeof module ? module.exports = e(require("axios"), require("echarts")) : "function" == typeof define && define.amd ? define(["axios", "echarts"], e) : "object" == typeof exports ? exports.jusfounDisasterMap = e(require("axios"), require("echarts")) : o.jusfounDisasterMap = e(o.axios, o.echarts)
}(this, function (o, e) {
  return function (o) {
    function e(r) {
      if (t[r])return t[r].exports;
      var a = t[r] = {i: r, l: !1, exports: {}};
      return o[r].call(a.exports, a, a.exports, e), a.l = !0, a.exports
    }

    var t = {};
    return e.m = o, e.c = t, e.d = function (o, t, r) {
      e.o(o, t) || Object.defineProperty(o, t, {configurable: !1, enumerable: !0, get: r})
    }, e.n = function (o) {
      var t = o && o.__esModule ? function () {
        return o.default
      } : function () {
        return o
      };
      return e.d(t, "a", t), t
    }, e.o = function (o, e) {
      return Object.prototype.hasOwnProperty.call(o, e)
    }, e.p = "", e(e.s = 0)
  }([function (o, e, t) {
    e.DisasterMap = t(1)
  }, function (o, e, t) {
    var r = t(2), a = t(3), n = function () {
      this._nameMap = {}
    };
    n.prototype = {
      _dom: null, _chart: null, init: function (o) {
        var e = this;
        if (!o || e._isEmpty(o))throw new Error("init方法参数为空.");
        if (o.dom.length ? e._dom = o.dom[0] : e._dom = o.dom, !e._dom || !e._isDOM(e._dom))throw new Error("dom为空或者不是HTMLElement");
        e._call = o.clickCallback,e._chart = a.init(e._dom), e._icon = o.icon, e._disaster = o.disaster, e._areaColor = o.areaColor || "#fff", e._borderColor = o.borderColor || "#fff", e._dataAreaColor = o.dataAreaColor, e._iconSize = o.iconSize || [20, 20], e._jsonUrl = o.jsonUrl, e._shadowBlur = o.shadowBlur, e._shadowColor = o.shadowColor, e._shadowOffset = o.shadowOffset, e._tooltipBackground = o.tooltipBackground, e._tooltipBorderColor = o.tooltipBorderColor, e._tooltipBorderWidth = o.tooltipBorderWidth, e._tooltipPadding = o.tooltipPadding, e._tooltipTextStyle = o.tooltipTextStyle, e._tooltipExtraCssText = o.tooltipExtraCssText, e._tooltipCallBack = o.tooltipCallBack || function (o) {
            if ("markPoint" == o.componentType)return "地区 : " + o.data.name + "<br />灾害类型 : " + o.data.message
          }, e._option = {
          tooltip: {
            type: "item",
            formatter: e._tooltipCallBack,
            backgroundColor: e._tooltipBackground,
            borderColor: e._tooltipBorderColor,
            borderWidth: e._tooltipBorderWidth,
            padding: e._tooltipPadding,
            textStyle: e._tooltipTextStyle,
            extraCssText: e._tooltipExtraCssText
          }, series: []
        }
      }, show: function (o) {
        var e = this;
        if (!o || e._isEmpty(o))throw new Error("show方法参数为空.");
        e._data = o.data || [], r.get(e._jsonUrl + e._nameMap[o.mapType] + ".json").then(function (t) {
          e._option.series = [];
          for (var r = 0; r < 2; r++) {
            a.registerMap(e._nameMap[o.mapType] + r, t.data);
            var n = 1 === r;
            e._option.series.push({
              zoom: 1.2,
              name: o.mapType + "灾害分布",
              type: "map",
              mapType: e._nameMap[o.mapType] + r,
              itemStyle: {
                normal: {
                  areaColor: e._areaColor,
                  borderColor: e._borderColor,
                  label: {show: !1},
                  shadowBlur: n ? 0 : e._shadowBlur,
                  shadowColor: n ? "none" : e._shadowColor,
                  shadowOffsetX: n ? 0 : e._shadowOffset[0],
                  shadowOffsetY: n ? 0 : e._shadowOffset[1]
                },
                emphasis: {
                  areaColor: e._areaColor,
                  borderColor: e._borderColor,
                  label: {show: !1},
                  shadowBlur: n ? 0 : e._shadowBlur,
                  shadowColor: n ? "none" : e._shadowColor,
                  shadowOffsetX: n ? 0 : e._shadowOffset[0],
                  shadowOffsetY: n ? 0 : e._shadowOffset[1]
                }
              },
              markPoint: {data: []},
              data: [],
              silent: !n
            })
          }
          var i = e._option.series[1], s = i.markPoint.data, l = i.data;
          s.length = 0, l.length = 0, e._data.forEach(function (o) {
            l.push({
            	bagPercent:o.bagPercent,
              name: o.name,
              itemStyle: {
                normal: {areaColor: e._dataAreaColor[o.degree=='轻度'?'0':o.degree=='中度'?'1':o.degree=='重度'?'2':'3'], label: {show: !1}},
                emphasis: {areaColor: '#079482', label: {show: !1}}
              },
              coord: o.coord,
              message: e._disaster[o.level],
              desc: o.desc,
              degree: o.degree,
              time: o.time,
            })
              if(s.find((v,i)=> v.name === o.name)){
              return
              }
              s.push({
              bagPercent:o.bagPercent,
              name: o.name,
              coord: o.coord,
              message: e._disaster[o.level],
              desc: o.desc,
              degree: o.degree,
              time: o.time,
              symbol: "image://" + e._icon[o.level],
              symbolSize: o.degree === '无' ? 0 : e._iconSize,
              // symbolOffset:[0,-e._iconSize[1] /2],
              label: {normal: {show: !1}, emphasis: {show: !1}}
            })
          }), e._chart.setOption(e._option, !0)
          ,e._chart.on('click',(params)=>{
              e._call(params)
          })
            // console.log(e._option);
          ;
        })
      }, hide: function () {
        this._chart.clear()
        this._chart.off()
      }, resize: function () {
        this._chart.resize()
      }, _isEmpty: function (o) {
        var e = null;
        for (e in o)return !1;
        return !0
      }, _isDOM: function (o) {
        return "object" == typeof HTMLElement ? o instanceof HTMLElement : o && "object" == typeof o && 1 === o.nodeType && "string" == typeof o.nodeName
      }, _dispose: function () {
        this._chart.dispose()
      }
    }, o.exports = n
  }, function (e, t) {
    e.exports = o
  }, function (o, t) {
    o.exports = e
  }])
});
